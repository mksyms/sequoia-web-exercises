<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>Weather Map Project</title>

    <!--bootstrap styling-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!--custom css styling-->
    <style>
        .container {
            background-color: lightblue;
            padding: 20px;
            text-align: center;
        }
        .row {
            background-color: lightgray;
        }
        .firstDay, .secondDay, .thirdDay {
            border: 1px solid black;
        }
        .header {
            margin: 0px;
            padding: 0px;
            text-align: left;
        }
        .city {
            text-align: left;
        }

        span {
            font-weight: bold;
        }

    </style>

</head>

<body>
    <div class="container">
        <h3 class="header">Weather Application</h3>
            <br>
        <form>
            <div class="row">
                <div class="col-xs-4">
                    <input type="text" class="form-control" placeholder="Latitude">
                </div>
                <div class="col-xs-4">
                    <input type="text" class="form-control" placeholder="Longitude">
                </div>
                <button type="button" class="btn btn-outline-primary">Get Weather!</button>
            </div>
        </form>
            <br>
        <h4 class="city">City</h4>

        <main class="row">
            <div class="col-xs-4 firstDay">
                <h6>Temp#F/C</h6>
                <h6>weather.img</h6>
                <h6>boldCloudStructure: type</h6>
                <h6>boldHumidity: #</h6>
                <h6>boldWind: #</h6>
                <h6>boldPressure: #</h6>
            </div>
            <div class="col-xs-4 secondDay">
                <h6>Temp#F/C</h6>
                <h6>weather.img</h6>
                <h6>boldCloudStructure: type</h6>
                <h6>boldHumidity: #</h6>
                <h6>boldWind: #</h6>
                <h6>boldPressure: #</h6>
            </div>
            <div class="col-xs-4 thirdDay">
                <h6>Temp#F/C</h6>
                <h6>weather.img</h6>
                <h6>boldCloudStructure: type</h6>
                <h6>boldHumidity: #</h6>
                <h6>boldWind: #</h6>
                <h6>boldPressure: #</h6>
            </div>

        </main>
        <div id="map-canvas"></div>

        <!--Google Maps API Key-->
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAQuHh2IJUCJJu7F8ymdmgDjc5cMfk_fco"></script>



    </div>

    <!--jQuery url-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <!--Bootstrap url-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- Script to show address on map -->
    <script type="text/javascript">
        (function() {
            "use strict";

            // Set our map options
            var mapOptions = {
                // Set the zoom level
                zoom: 10,

//            // This sets the center of the map at our location
//            center: {
//                lat:  37.769656,
//                lng: -122.4496136
//            },
                 mapTypeId: google.maps.MapTypeId.HYBRID
            };

            var address = "Alcalde J. Elosegi Hiribidea, 273, 20015 Donostia, Gipuzkoa, Spain";

            var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

// Geocode our address
            function getLocation(address) {
                // Init geocoder object
                var geocoder = new google.maps.Geocoder();

                geocoder.geocode({"address": address}, function (results, status) { //in this function(results, = gives back LAT & LON as result
                    // Check for a successful result
                    if (status == google.maps.GeocoderStatus.OK) {
                        var position = results[0].geometry.location; //use results and store them in
                        return position;
                        // Recenter the map over the address
                        // map.setCenter(results[0].geometry.location); -- HARD CODED LAT & LON
                        addMarkerAndInfoWindow(position, restaurant.name, restaurant.info);
                    } else {
                        // Show an error message with the status if our request fails
                        alert("Geocoding was not successful - STATUS: " + status);
                    }
                });
            }
            getLocation(restaurant.address);



        })();



        var information = $.get("http://api.openweathermap.org/data/2.5/forecast/daily", {
            APPID: "a8df453d0094a6356c71e33efe98f000",
            q:     "San Antonio, TX",
            units: "imperial",
            cnt: 3

        }).done(function (response) {
            fillOutNewRows(response);
//                console.log(response);

        }).fail(function (jqXhr, status, error) {
            console.log("Response status: " + status);
            console.log("Error object: " + error);
        });


        function fillOutNewRows(weatherForDays) {

            var weatherROW = "";

            for(var i = 0; i < weatherForDays.list.length; i += 8) {
                console.log(weatherForDays);


                weatherROW += "<div>";
                weatherROW += "<h4><span>" + weatherForDays.list[i].temp.max + "/" + weatherForDays.list[i].temp.min + "&deg;" + "</span></h4>";
                weatherROW += "<img src='https://openweathermap.org/img/w/"+weatherForDays.list[i].weather[0].icon+".png'>";
                weatherROW += "<h6>" + "<span>" + weatherForDays.list[i].weather[0].main + ": </span>" + weatherForDays.list[i].weather[0].description + "</h6>";
                weatherROW += "<h6>" + "<span>Humidity: </span>" + weatherForDays.list[i].humidity + "</h6>";
                weatherROW += "<h6>" + "<span>Wind: </span>" + weatherForDays.list[i].speed + "</h6>";
                weatherROW += "<h6>" + "<span>Pressure: </span>" + weatherForDays.list[i].pressure + "</h6>";
                weatherROW += "</div>";

            }

            $(".firstDay, .secondDay, .thirdDay").html(weatherROW);
            $(".city").text(weatherForDays.city.name);

        }


    </script>

</body>
</html>